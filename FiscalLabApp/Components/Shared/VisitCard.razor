<div class="visit-card-component">
    <div class="card-head-container">
        <div class="plant-container">
            @Visit.BasicInformation.Plant.Name
            <br>
            @($"{Visit.BasicInformation.Plant.Address.City} - {Visit.BasicInformation.Plant.Address.State}")
        </div>
        <div class="creation-date-container">
            @($"{Visit.CreatedAt.ToLocalTime():dd/MM/yyyy HH:mm}")
        </div>
    </div>

    <div class="card-body-container">
        <div class="card-body-container-item">
            <div class="card-body-container-item-text">
                Pendencias:
            </div>
            <div class="card-badge @GetPendingItemsStyle()">
                @($"{_pendingItemsCount} de {_totalItemsCount}")
            </div>
        </div>
        <div class="divider"></div>

        <div class="card-body-container-item">
            <div class="card-body-container-item-text">
                Sincronizado em:
            </div>
            <div class="card-badge @GetSyncAtStyle()">
                @if (Visit.SyncedAt.HasValue)
                {
                    @($"{Visit.SyncedAt.Value.ToLocalTime():dd/MM/yyyy HH:mm:ss}")
                }
                else
                {
                    @("Não sincronizado.")
                }
            </div>
        </div>
        <div class="divider"></div>

        <div class="card-body-container-item">
            <div class="card-body-container-item-text">
                Enviado em:
            </div>
            <div class="card-badge @GetNotifiedByEmailAtStyle()">
                @if (Visit.NotifiedByEmailAt.HasValue)
                {
                    @($"{Visit.NotifiedByEmailAt.Value.ToLocalTime():dd/MM/yyyy HH:mm:ss}")
                }
                else if (Visit.NotifyByEmail)
                {
                    @("Aguardando envio.")
                }
                else
                {
                    @("Não marcado para envio.")
                }
            </div>
        </div>
    </div>

    <div class="visit-card-button-container">
        <button class="visit-card-button-neutral" @onclick="OnOpenEditVisitPageHandlerAsync">
            <i class="bi bi-pencil-square"></i>
        </button>
        <button class="visit-card-button-neutral" @onclick="OnOpenAddImageModalHandlerAsync">
            <i class="bi bi-images"></i>
        </button>
        <button class="visit-card-button-danger" @onclick="OnDeleteHandlerAsync">
            <i class="bi bi-trash3"></i>
        </button>
    </div>
</div>
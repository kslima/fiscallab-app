@using FiscalLabApp.Enums
@using FiscalLabApp.Helpers

<EditForm EditContext="@_editContext" OnValidSubmit="@OnSaveClickHandler">
    <DataAnnotationsValidator/>
    <div class="form-floating mb-3">
        <InputText class="form-control" id="nameInput" @bind-Value="PlantViewModel!.Name"/>
        <label for="nameInput">Nome <strong class="text-danger">*</strong></label>
        <ValidationMessage For="@(() => PlantViewModel.Name)"/>
    </div >

    <div class="row">
        <div class="col">
            <div class="form-floating mb-3">
                <InputText class="form-control" id="cityInput" @bind-Value="PlantViewModel.City"/>
                <label for="cityInput">Cidade <strong class="text-danger">*</strong></label>
                <ValidationMessage For="@(() => PlantViewModel.City)"/>
            </div >
        </div>

        <div class="col">
            <div class="form-floating mb-3">
                <InputSelect @bind-Value="SelectedState" class="form-control" id="stateInput" @bind-Value:after="OnStateChangeHandler">
                    @foreach (var state in  AddressHelper.StatesFromBrazil)
                    {
                        <option value="@state.Key" selected="@(PlantViewModel.State.Equals(state.Key))">@state.Value</option>
                    }
                </InputSelect>
                <label for="stateInput">Estado <strong class="text-danger">*</strong></label>
                <ValidationMessage For="@(() => PlantViewModel.State)"/>
            </div >
        </div>

    </div>

    <div class="d-flex justify-content-end gap-3">
        <Button Title="Salvar" StyleType="ButtonStyle.Success" OnClick="OnSubmitHandler"></Button>
    </div>
</EditForm >
